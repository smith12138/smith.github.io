<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Settings 组件分析</title>
      <link href="/2020/06/28/Settings%20%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90/"/>
      <url>/2020/06/28/Settings%20%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<ul><li><h4 id="COOKIES-ENABLED"><a href="#COOKIES-ENABLED" class="headerlink" title="COOKIES_ENABLED"></a>COOKIES_ENABLED</h4><p> 进入 scrapy 包 -&gt; downloadermiddlewares 子包 -&gt; cookies模块中</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">CookiesMiddleware</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This middleware enables working with sites that need cookies"""</span>    <span class="token comment" spellcheck="true"># 使用该中间件可以处理需要Cookie的网站</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>jars <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span>CookieJar<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>debug <span class="token operator">=</span> debug    @classmethod    <span class="token keyword">def</span> <span class="token function">from_crawler</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> crawler<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 这是一个组件，作用于所有的scrapy Request</span>        <span class="token comment" spellcheck="true"># 通过这个组件，提取前一个Request中的cookie，并加入下一个Request cookie中去</span>        <span class="token keyword">if</span> <span class="token operator">not</span> crawler<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>getbool<span class="token punctuation">(</span><span class="token string">'COOKIES_ENABLED'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> NotConfigured        <span class="token keyword">return</span> cls<span class="token punctuation">(</span>crawler<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>getbool<span class="token punctuation">(</span><span class="token string">'COOKIES_DEBUG'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> request<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'dont_merge_cookies'</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">return</span></code></pre></li></ul><hr><hr><ul><li><h4 id="USER-AGENT"><a href="#USER-AGENT" class="headerlink" title="USER_AGENT"></a>USER_AGENT</h4><p>设置全局USER_AGENT，与DOWNLOADERMIDDLEWARES 配合</p><pre><code>USER_AGENT = &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36&#39;</code></pre></li></ul><ul><li><h4 id="DOWNLOADER-MIDDLEWARES"><a href="#DOWNLOADER-MIDDLEWARES" class="headerlink" title="DOWNLOADER_MIDDLEWARES"></a>DOWNLOADER_MIDDLEWARES</h4><p> 赋予每个Scrapy Request USER-AGENT</p><pre><code>DOWNLOADER_MIDDLEWARES = {#    &#39;ArticleSpider.middlewares.ArticlespiderDownloaderMiddleware&#39;: 543,    &#39;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&#39;: 2}</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计Lagou表结构</title>
      <link href="/2020/06/28/%E8%AE%BE%E8%AE%A1%E8%A1%A8%E7%BB%93%E6%9E%84/"/>
      <url>/2020/06/28/%E8%AE%BE%E8%AE%A1%E8%A1%A8%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h3 id="MySQL-表结构设计"><a href="#MySQL-表结构设计" class="headerlink" title="MySQL 表结构设计"></a>MySQL 表结构设计</h3><ul><li><p>分析网站数据，制定合理的表结构</p><p><img src="https://i.loli.net/2020/06/18/4IemkD7ZC6vVpzg.png" alt="如图所示"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Practice </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
